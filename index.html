<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.2/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"machl66.github.io","root":"/","images":"/images","scheme":"Muse","version":"8.2.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}};
  </script>
<meta property="og:type" content="website">
<meta property="og:title" content="Machl">
<meta property="og:url" content="https://machl66.github.io/index.html">
<meta property="og:site_name" content="Machl">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Machl">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://machl66.github.io/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>
<title>Machl</title>
  




  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Machl</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Machl</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">12</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://machl66.github.io/2021/03/27/C++%E5%9F%BA%E7%A1%80%E6%80%BB%E7%AF%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Machl">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Machl">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/03/27/C++%E5%9F%BA%E7%A1%80%E6%80%BB%E7%AF%87/" class="post-title-link" itemprop="url">C++基础总篇</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-03-27 13:24:32" itemprop="dateCreated datePublished" datetime="2021-03-27T13:24:32+08:00">2021-03-27</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-04-01 11:38:31" itemprop="dateModified" datetime="2021-04-01T11:38:31+08:00">2021-04-01</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="C-与C语言结构体的区别"><a href="#C-与C语言结构体的区别" class="headerlink" title="C++与C语言结构体的区别"></a>C++与C语言结构体的区别</h1><h2 id="C-可以在结构体中声明函数"><a href="#C-可以在结构体中声明函数" class="headerlink" title="C++可以在结构体中声明函数"></a>C++可以在结构体中声明函数</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">FTest</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Hello</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span> </span>&#123;&#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="C只能在结构体中声明函数指针"><a href="#C只能在结构体中声明函数指针" class="headerlink" title="C只能在结构体中声明函数指针"></a>C只能在结构体中声明函数指针</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdio.h&quot;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Hello</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">FT</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> a;</span><br><span class="line">    <span class="keyword">int</span> b;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span>(*Hello1)(<span class="keyword">int</span>, <span class="keyword">int</span>);</span><br><span class="line">&#125; FTs;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    FTs.Hello1 = Hello;</span><br><span class="line">    <span class="comment">//将Hello函数赋值给Hello1函数指针</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="函数通过引用传参"><a href="#函数通过引用传参" class="headerlink" title="函数通过引用传参"></a>函数通过引用传参</h1><h2 id="直接传变量"><a href="#直接传变量" class="headerlink" title="直接传变量"></a>直接传变量</h2><p><code>产生内存拷贝，效率低，不会对实际变量进行修改赋值，只针对形参</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">FTestStruct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> a;</span><br><span class="line">	<span class="keyword">int</span> b;</span><br><span class="line">	<span class="keyword">long</span> <span class="keyword">int</span> c;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Test</span><span class="params">(FTestStruct aa)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    aa.a=<span class="number">100</span>;</span><br><span class="line">    <span class="comment">//传的是变量，这里的修改是对形参aa进行的修改，而不是对传进来的变量进行修改</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	</span><br><span class="line">	FTestStruct c;</span><br><span class="line">	c.a = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//需要对值进行初始化，否则无法进行操作</span></span><br><span class="line">	Test(c);</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; c.a &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">//输出结果为0</span></span><br><span class="line">    <span class="comment">//Test函数中 “aa.a=100” 并未对传入的c进行修改</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="通过引用传变量"><a href="#通过引用传变量" class="headerlink" title="通过引用传变量"></a>通过引用传变量</h2><p><code>高效，不产生内存拷贝，C语言不支持但C++优先使用传引用,比指针高效</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">FTestStruct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> a;</span><br><span class="line">	<span class="keyword">int</span> b;</span><br><span class="line">	<span class="keyword">long</span> <span class="keyword">int</span> c;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Test</span><span class="params">(FTestStruct &amp;aa)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    aa.a=<span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">	FTestStruct c;</span><br><span class="line">	Test(c);</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; c.a &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">//输出结果为100，对传入的变量进行了实际修改</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//不产生内存拷贝 形参相当于传入变量的别名，实际操作针对传入的变量</span></span><br></pre></td></tr></table></figure>
<h2 id="通过指针传变量"><a href="#通过指针传变量" class="headerlink" title="通过指针传变量"></a>通过指针传变量</h2><p><code>产生指针的内存拷贝，但是可以对传入变量进行修改，效率适中。C语言和C++都支持</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">FTestStruct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> a;</span><br><span class="line">	<span class="keyword">int</span> b;</span><br><span class="line">	<span class="keyword">long</span> <span class="keyword">int</span> c;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//指针自己占4个字节，产生了指针的内存拷贝</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Test</span><span class="params">(FTestStruct *aa)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	aa-&gt;a = <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	FTestStruct c;</span><br><span class="line">	Test(&amp;c);</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; c.a &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="引用的特性"><a href="#引用的特性" class="headerlink" title="引用的特性"></a>引用的特性</h1><h2 id="引用必须初始化"><a href="#引用必须初始化" class="headerlink" title="引用必须初始化"></a><code>引用必须初始化</code></h2><h2 id="一个变量可以被多个对象引用"><a href="#一个变量可以被多个对象引用" class="headerlink" title="一个变量可以被多个对象引用"></a><code>一个变量可以被多个对象引用</code></h2><h2 id="引用具有唯一性-一旦绑定了某个实体，就不能被其他对象引用"><a href="#引用具有唯一性-一旦绑定了某个实体，就不能被其他对象引用" class="headerlink" title="引用具有唯一性 一旦绑定了某个实体，就不能被其他对象引用"></a><code>引用具有唯一性 一旦绑定了某个实体，就不能被其他对象引用</code></h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">FTestStruct a;</span><br><span class="line">FTestStruct &amp;a1 = a;<span class="comment">//初始化引用，相当于a1是a的别名</span></span><br><span class="line">FTestStruct &amp;a2 = a;<span class="comment">//可以被多个对象引用 相当于这个变量有n个别名</span></span><br><span class="line">a2.a=<span class="number">0</span>;<span class="comment">//通过“.”访问</span></span><br><span class="line">FTestStruct &amp;a3 = <span class="literal">NULL</span>;<span class="comment">//不能等于Null 直接崩溃</span></span><br><span class="line"><span class="comment">//引用的唯一性</span></span><br><span class="line">FTestStruct &amp;a3 = a;</span><br><span class="line"><span class="comment">//a3已经绑定了a这个变量，a3不能再绑定其他变量</span></span><br></pre></td></tr></table></figure>
<h2 id="引用和指针在底层的实现方式是一样的-都是通过指针方式实现"><a href="#引用和指针在底层的实现方式是一样的-都是通过指针方式实现" class="headerlink" title="引用和指针在底层的实现方式是一样的 都是通过指针方式实现"></a>引用和指针在底层的实现方式是一样的 都是通过指针方式实现</h2><h2 id="引用没有空引用，但是有空指针。即指针可以不初始化"><a href="#引用没有空引用，但是有空指针。即指针可以不初始化" class="headerlink" title="引用没有空引用，但是有空指针。即指针可以不初始化"></a>引用没有空引用，但是有空指针。即指针可以不初始化</h2><h2 id="如果通过sizeof来算字节大小"><a href="#如果通过sizeof来算字节大小" class="headerlink" title="如果通过sizeof来算字节大小"></a>如果通过sizeof来算字节大小</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">FTestStruct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> a;</span><br><span class="line">    <span class="keyword">int</span> b;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">int</span> c;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    </span><br><span class="line">    FTestStruct c;</span><br><span class="line">    FTestStruct&amp; a1 = c;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="keyword">sizeof</span>(a1) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">//输出的字节大小为该结构体中，成员变量的字节大小相加</span></span><br><span class="line">    FTestStruct* a2;</span><br><span class="line">    a2 = &amp;c;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="keyword">sizeof</span>(a2) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">//输出的字节大小为该指针的字节大小 4个字节</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="指针可以修改指向的地址，引用不可以"><a href="#指针可以修改指向的地址，引用不可以" class="headerlink" title="指针可以修改指向的地址，引用不可以"></a>指针可以修改指向的地址，引用不可以</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">FTestStruct a;</span><br><span class="line">FTestStruct b;</span><br><span class="line">FTestStruct *a1;</span><br><span class="line">a1 = &amp;a;<span class="comment">//此时a1指针指向a</span></span><br><span class="line">a1 = &amp;b;<span class="comment">//此时a1指针指向了b 发生了修改</span></span><br><span class="line"></span><br><span class="line">FTestStruct &amp;a2 = a;<span class="comment">//a2是变量a的引用</span></span><br><span class="line">a2 = b;<span class="comment">//此时相当于把b赋值给a，a2仍然是a的引用</span></span><br><span class="line">   </span><br></pre></td></tr></table></figure>
<h1 id="c-类"><a href="#c-类" class="headerlink" title="c++类"></a>c++类</h1><h2 id="C-类默认成员为private"><a href="#C-类默认成员为private" class="headerlink" title="C++类默认成员为private"></a>C++类默认成员为private</h2><h2 id="类也有构造和析构"><a href="#类也有构造和析构" class="headerlink" title="类也有构造和析构"></a>类也有构造和析构</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FMonster</span>//类默认是<span class="title">private</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    FMonster();<span class="comment">//构造</span></span><br><span class="line">    ~FMonster();<span class="comment">//析构</span></span><br><span class="line">    <span class="comment">//构造函数和析构需要放在public下，否则无法初始化时调用</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">FMonster::FMonster()</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">FMonster::~FMonster()</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="C-继承"><a href="#C-继承" class="headerlink" title="C++继承"></a>C++继承</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">AAA</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> a;</span><br><span class="line">    <span class="keyword">int</span> b;</span><br><span class="line">&#125;;<span class="comment">//结构体默认是公共的</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">BBB</span> :</span><span class="keyword">public</span> AAA</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> c;</span><br><span class="line">&#125;;<span class="comment">//继承了 来自父类 AAA中的属性</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    BBB aaa;</span><br><span class="line">    aaa.a = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="父类中的Protect类"><a href="#父类中的Protect类" class="headerlink" title="父类中的Protect类"></a>父类中的Protect类</h2><p><code>派生类无法访问父类中private成员</code></p>
<p><code>派生类可以访问父类中的protect成员</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">AAA</span></span></span><br><span class="line"><span class="class">  &#123;</span></span><br><span class="line">      <span class="keyword">int</span> a;</span><br><span class="line">      <span class="keyword">int</span> b;</span><br><span class="line">  <span class="keyword">protected</span>:</span><br><span class="line">      <span class="keyword">int</span> m;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">BBB</span> :</span><span class="keyword">public</span> AAA</span><br><span class="line">  &#123;</span><br><span class="line">      <span class="keyword">int</span> c;</span><br><span class="line">      <span class="function"><span class="keyword">void</span> <span class="title">setm</span><span class="params">(<span class="keyword">int</span> m1)</span></span></span><br><span class="line"><span class="function">      </span>&#123;</span><br><span class="line">          <span class="keyword">this</span>-&gt;m = m;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//父类中的protected下的 m 变量只可以在派生类内部进行访问，外部无法访问</span></span><br><span class="line">      <span class="function"><span class="keyword">int</span> <span class="title">getm</span><span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line"><span class="keyword">return</span> m;</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">   b.setm(<span class="number">10</span>);</span><br><span class="line">   <span class="built_in">cout</span> &lt;&lt; b.getm() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">      <span class="comment">//此时输出m的值为10</span></span><br><span class="line">      <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h2 id="通过public函数访问private成员"><a href="#通过public函数访问private成员" class="headerlink" title="通过public函数访问private成员"></a>通过public函数访问private成员</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">test</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> a;</span><br><span class="line">    <span class="keyword">int</span> b;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> m;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setvalue</span><span class="params">(<span class="keyword">int</span> m1)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;m = m1;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">printvalue</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; m &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    test a;</span><br><span class="line">    a.setvalue(<span class="number">10</span>);</span><br><span class="line">    a.printvalue();</span><br><span class="line">    <span class="comment">//输出值为10 借助public成员访问了private成员</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="结构体构造和析构"><a href="#结构体构造和析构" class="headerlink" title="结构体构造和析构"></a>结构体构造和析构</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">FTest</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    FTest()<span class="comment">//构造</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//初始化 声明对象的时候就触发</span></span><br><span class="line">        <span class="comment">//内存尚未分配完就调用该函数</span></span><br><span class="line">    &#125;</span><br><span class="line">    ~FTest()<span class="comment">//析构</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//结束的时候调用</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="多继承"><a href="#多继承" class="headerlink" title="多继承"></a>多继承</h2><p>可同时继承多个类，初始化派生类时，会递归初始化父类</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    A()&#123; <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;A&quot;</span> &lt;&lt; <span class="built_in">endl</span>; &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span>:</span><span class="keyword">public</span> A</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    B()&#123; <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;B&quot;</span> &lt;&lt; <span class="built_in">endl</span>; &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span>:</span><span class="keyword">public</span> A</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    C()&#123; <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;C&quot;</span> &lt;&lt; <span class="built_in">endl</span>; &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span> :</span><span class="keyword">public</span> B, <span class="keyword">public</span> C </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    D()&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    D d;</span><br><span class="line">    <span class="comment">//输出 A B A C</span></span><br><span class="line">    <span class="comment">//初始化D时，也初始化了B(初始化B先初始化A) C(初始化C先初始化A)</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="初始化列表"><a href="#初始化列表" class="headerlink" title="初始化列表"></a>初始化列表</h1><h2 id="对该类中的变量进行初始化"><a href="#对该类中的变量进行初始化" class="headerlink" title="对该类中的变量进行初始化"></a><code>对该类中的变量进行初始化</code></h2><h2 id="初始化列表顺序必须与变量声明顺序一致"><a href="#初始化列表顺序必须与变量声明顺序一致" class="headerlink" title="初始化列表顺序必须与变量声明顺序一致"></a><code>初始化列表顺序必须与变量声明顺序一致</code></h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    A(<span class="keyword">int</span> a1, <span class="keyword">int</span> a2, <span class="keyword">int</span> a3);</span><br><span class="line">    <span class="keyword">int</span> a;</span><br><span class="line">    <span class="keyword">int</span> b;</span><br><span class="line">    <span class="keyword">int</span> c;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">A::A(<span class="keyword">int</span> a1,<span class="keyword">int</span> a2,<span class="keyword">int</span> a3)<span class="comment">//构造方法</span></span><br><span class="line">    :a(a1),</span><br><span class="line">    b(a2),</span><br><span class="line">    c(a3)<span class="comment">//初始化列表使用方法</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">A <span class="title">a</span><span class="params">(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span></span>;<span class="comment">//声明变量时初始化</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; a.a &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="初始化列表中也可以初始化父类"><a href="#初始化列表中也可以初始化父类" class="headerlink" title="初始化列表中也可以初始化父类"></a>初始化列表中也可以初始化父类</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">O</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    O()&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> :</span><span class="keyword">public</span> O</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    A(<span class="keyword">int</span> a1, <span class="keyword">int</span> a2, <span class="keyword">int</span> a3);</span><br><span class="line">    <span class="keyword">int</span> a;</span><br><span class="line">    <span class="keyword">int</span> b;</span><br><span class="line">    <span class="keyword">int</span> c;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">A::A(<span class="keyword">int</span> a1,<span class="keyword">int</span> a2,<span class="keyword">int</span> a3)<span class="comment">//构造方法</span></span><br><span class="line">    :O(),<span class="comment">//初始化父类 O </span></span><br><span class="line">    a(a1),</span><br><span class="line">    b(a2),</span><br><span class="line">    c(a3)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://machl66.github.io/2021/03/24/HotUpdate/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Machl">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Machl">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/03/24/HotUpdate/" class="post-title-link" itemprop="url">HotUpdate</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-03-24 21:29:50 / Modified: 21:30:25" itemprop="dateCreated datePublished" datetime="2021-03-24T21:29:50+08:00">2021-03-24</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="UE4-25-热更新使用说明"><a href="#UE4-25-热更新使用说明" class="headerlink" title="UE4.25 热更新使用说明"></a><code>UE4.25 热更新使用说明</code></h1><h2 id="运行环境"><a href="#运行环境" class="headerlink" title="运行环境"></a>运行环境</h2><p>以4.25.X为基础开发看了热更模板  需使用C++ 纯蓝图未尝试</p>
<h2 id="插件使用"><a href="#插件使用" class="headerlink" title="插件使用"></a>插件使用</h2><h3 id="1-将-Plugins文件夹，放到项目路径下，与-Content平级"><a href="#1-将-Plugins文件夹，放到项目路径下，与-Content平级" class="headerlink" title="1.将/Plugins文件夹，放到项目路径下，与 /Content平级"></a>1.将<code>/Plugins</code>文件夹，放到项目路径下，与 <code>/Content</code>平级</h3><h3 id="2-点击uproject文件夹，重新Generate-VS项目文件"><a href="#2-点击uproject文件夹，重新Generate-VS项目文件" class="headerlink" title="2.点击uproject文件夹，重新Generate VS项目文件"></a>2.点击uproject文件夹，重新Generate VS项目文件</h3><h3 id="3-打开uproject项目，查看插件是否已启用"><a href="#3-打开uproject项目，查看插件是否已启用" class="headerlink" title="3.打开uproject项目，查看插件是否已启用"></a>3.打开uproject项目，查看插件是否已启用</h3><img src="/2021/03/24/HotUpdate/T_CheckPlugins.png" width="40%" height="40%">

<h2 id="启用插件后，将热更核心UI显示在屏幕上"><a href="#启用插件后，将热更核心UI显示在屏幕上" class="headerlink" title="启用插件后，将热更核心UI显示在屏幕上"></a>启用插件后，将热更核心UI显示在屏幕上</h2><p>路径 ： <code>/Conetnt/HptUpdateCore/UMG/UMG_UpdatePage_Main</code></p>
<p>在4.25样例工程中，已在<code>/Conetnt/GamePlay/BP_PlayerController_Main</code>中生成UI</p>
<img src="/2021/03/24/HotUpdate/T_Update.png" width="40%" height="40%">

<h2 id="UI设计思路"><a href="#UI设计思路" class="headerlink" title="UI设计思路"></a>UI设计思路</h2><h3 id="ProgressBar-ProgressText-当前版本号-正在下载的文件名称-正在下载的文件进度"><a href="#ProgressBar-ProgressText-当前版本号-正在下载的文件名称-正在下载的文件进度" class="headerlink" title="ProgressBar ProgressText 当前版本号 正在下载的文件名称 正在下载的文件进度"></a>ProgressBar ProgressText 当前版本号 正在下载的文件名称 正在下载的文件进度</h3><img src="/2021/03/24/HotUpdate/T_Update_Ing.png" width="40%" height="40%">

<h2 id="UI中实现下载并查看下载进度逻辑实现"><a href="#UI中实现下载并查看下载进度逻辑实现" class="headerlink" title="UI中实现下载并查看下载进度逻辑实现"></a>UI中实现下载并查看下载进度逻辑实现</h2><img src="/2021/03/24/HotUpdate/T_UI_Update_01.png">
<img src="/2021/03/24/HotUpdate/T_UI_Update_02.png">
<img src="/2021/03/24/HotUpdate/T_UI_Update_03.png">

<h2 id="逻辑代码简单分析"><a href="#逻辑代码简单分析" class="headerlink" title="逻辑代码简单分析"></a>逻辑代码简单分析</h2><h3 id="设置窗口模式用于更新"><a href="#设置窗口模式用于更新" class="headerlink" title="设置窗口模式用于更新"></a>设置窗口模式用于更新</h3><h3 id="创建OSS服务器引用，并提升为变量"><a href="#创建OSS服务器引用，并提升为变量" class="headerlink" title="创建OSS服务器引用，并提升为变量"></a>创建OSS服务器引用，并提升为变量</h3><h3 id="Event-On-End-Init-Version-结束验证版本号时-从服务器获取最新版本号给Text赋值"><a href="#Event-On-End-Init-Version-结束验证版本号时-从服务器获取最新版本号给Text赋值" class="headerlink" title="Event On End Init Version 结束验证版本号时 从服务器获取最新版本号给Text赋值"></a>Event On End Init Version 结束验证版本号时 从服务器获取最新版本号给Text赋值</h3><h3 id="Event-On-Downloading-Begin-开始下载文件时-将正在下载的文件名赋值给TEXT-并且Tick更新ProgressBar"><a href="#Event-On-Downloading-Begin-开始下载文件时-将正在下载的文件名赋值给TEXT-并且Tick更新ProgressBar" class="headerlink" title="Event On Downloading Begin 开始下载文件时 将正在下载的文件名赋值给TEXT 并且Tick更新ProgressBar"></a>Event On Downloading Begin 开始下载文件时 将正在下载的文件名赋值给TEXT 并且Tick更新ProgressBar</h3><h3 id="Event-On-Downloading-From-Server-当开始下载时将目标文件总字节数和当前已下载字节数赋值给TEXT"><a href="#Event-On-Downloading-From-Server-当开始下载时将目标文件总字节数和当前已下载字节数赋值给TEXT" class="headerlink" title="Event On Downloading From Server 当开始下载时将目标文件总字节数和当前已下载字节数赋值给TEXT"></a>Event On Downloading From Server 当开始下载时将目标文件总字节数和当前已下载字节数赋值给TEXT</h3><h3 id="Event-On-Download-End-下载结束时-检测当前版本是否为最新-如果为最新将更新结束的提示UI显示出来-并准备退出更新界面"><a href="#Event-On-Download-End-下载结束时-检测当前版本是否为最新-如果为最新将更新结束的提示UI显示出来-并准备退出更新界面" class="headerlink" title="Event On Download End 下载结束时 检测当前版本是否为最新 如果为最新将更新结束的提示UI显示出来 并准备退出更新界面"></a>Event On Download End 下载结束时 检测当前版本是否为最新 如果为最新将更新结束的提示UI显示出来 并准备退出更新界面</h3><h1 id="配置OSS服务器-以阿里云为例"><a href="#配置OSS服务器-以阿里云为例" class="headerlink" title="配置OSS服务器 以阿里云为例"></a><code>配置OSS服务器 以阿里云为例</code></h1><h2 id="创建Bucket"><a href="#创建Bucket" class="headerlink" title="创建Bucket"></a>创建Bucket</h2><img src="/2021/03/24/HotUpdate/T_CreateOSSBucket.png" width="40%" height="40%">

<h3 id="其中-地区就近选择-读写权限设置为-公共读"><a href="#其中-地区就近选择-读写权限设置为-公共读" class="headerlink" title="其中 地区就近选择 读写权限设置为 公共读"></a><code>其中 地区就近选择</code> 读写权限设置为 <em><strong>公共读</strong></em></h3><h2 id="Bucket创建好后配置热更插件"><a href="#Bucket创建好后配置热更插件" class="headerlink" title="Bucket创建好后配置热更插件"></a>Bucket创建好后配置热更插件</h2><img src="/2021/03/24/HotUpdate/T_PluginSetting.png" width="40%" height="40%">

<h2 id="在OSS控制台中获取AccessKey"><a href="#在OSS控制台中获取AccessKey" class="headerlink" title="在OSS控制台中获取AccessKey"></a>在OSS控制台中获取AccessKey</h2><img src="/2021/03/24/HotUpdate/T_GoToAccessKey.png" width="40%" height="40%">

<img src="/2021/03/24/HotUpdate/T_GetAccessKey.png">

<h2 id="在Bucket概览中获取EndPoint"><a href="#在Bucket概览中获取EndPoint" class="headerlink" title="在Bucket概览中获取EndPoint"></a>在Bucket概览中获取EndPoint</h2><img src="/2021/03/24/HotUpdate/T_GetEndPoint.png">

<h3 id="将上述配置文件配置到插件配置中去"><a href="#将上述配置文件配置到插件配置中去" class="headerlink" title="将上述配置文件配置到插件配置中去"></a>将上述配置文件配置到插件配置中去</h3><h2 id="获取Bucket域名-URL"><a href="#获取Bucket域名-URL" class="headerlink" title="获取Bucket域名 URL"></a>获取Bucket域名 URL</h2><h3 id="URL即EndPoint旁边的域名"><a href="#URL即EndPoint旁边的域名" class="headerlink" title="URL即EndPoint旁边的域名"></a><code>URL即EndPoint旁边的域名</code></h3><img src="/2021/03/24/HotUpdate/T_SetURL.png">

<h3 id="顺便将更新主UI中的URL也修改了"><a href="#顺便将更新主UI中的URL也修改了" class="headerlink" title="顺便将更新主UI中的URL也修改了"></a>顺便将更新主UI中的URL也修改了</h3><h2 id="至此热更新插件配置完毕-进入更新流程"><a href="#至此热更新插件配置完毕-进入更新流程" class="headerlink" title="至此热更新插件配置完毕 进入更新流程"></a>至此热更新插件配置完毕 进入更新流程</h2><h1 id="如何更新母包"><a href="#如何更新母包" class="headerlink" title="如何更新母包"></a><code>如何更新母包</code></h1><h2 id="先打一个基础包-命名为BaseVersion"><a href="#先打一个基础包-命名为BaseVersion" class="headerlink" title="先打一个基础包 命名为BaseVersion"></a>先打一个基础包 命名为BaseVersion</h2><img src="/2021/03/24/HotUpdate/T_PackageBaseVersion.png" width="50%" height="50%">

<h2 id="此时修改了C-代码，蓝图，或者是场景等UE4内部Pak包资源-需要推送母包更新"><a href="#此时修改了C-代码，蓝图，或者是场景等UE4内部Pak包资源-需要推送母包更新" class="headerlink" title="此时修改了C++代码，蓝图，或者是场景等UE4内部Pak包资源 需要推送母包更新"></a>此时修改了C++代码，蓝图，或者是场景等UE4内部Pak包资源 需要推送母包更新</h2><h2 id="母包更新流程：比如往场景中加了一个cube"><a href="#母包更新流程：比如往场景中加了一个cube" class="headerlink" title="母包更新流程：比如往场景中加了一个cube"></a>母包更新流程：比如往场景中加了一个cube</h2><h3 id="再打打包整体项目"><a href="#再打打包整体项目" class="headerlink" title="再打打包整体项目"></a>再打打包整体项目</h3><h3 id="打包后使用Version控制插件"><a href="#打包后使用Version控制插件" class="headerlink" title="打包后使用Version控制插件"></a>打包后使用Version控制插件</h3><img src="/2021/03/24/HotUpdate/T_VersionPlugin.png" width="50%" height="50%">

<h3 id="Pak包选择"><a href="#Pak包选择" class="headerlink" title="Pak包选择"></a>Pak包选择</h3><p><code>F:\WBA9\V1.0.0.1\WindowsNoEditor\HotUpdate_4_25_Machl\Content\Paks\HotUpdate_4_25_Machl-WindowsNoEditor.pak</code></p>
<h3 id="如果修改了C-代码等dll-选择-exe"><a href="#如果修改了C-代码等dll-选择-exe" class="headerlink" title="如果修改了C++代码等dll 选择.exe"></a>如果修改了C++代码等dll 选择.exe</h3><p><code>E:\UE_WorkSpace\HotUpdate_4_25_Machl\Binaries\Win64\HotUpdate_4_25_Machl.exe</code></p>
<h2 id="点击-Update-Main-Version"><a href="#点击-Update-Main-Version" class="headerlink" title="点击 Update Main Version"></a><code>点击 Update Main Version</code></h2><h2 id="打开BaseVersion-自动更新"><a href="#打开BaseVersion-自动更新" class="headerlink" title="打开BaseVersion 自动更新"></a>打开BaseVersion 自动更新</h2><img src="/2021/03/24/HotUpdate/T_AutoUpdate.png" width="60%">

<h2 id="母包更新结束后自动重启程序"><a href="#母包更新结束后自动重启程序" class="headerlink" title="母包更新结束后自动重启程序"></a>母包更新结束后自动重启程序</h2><h1 id="热更新外部数据表"><a href="#热更新外部数据表" class="headerlink" title="热更新外部数据表"></a>热更新外部数据表</h1><h2 id="从外部读取CSV数据表-一律放在Patch下"><a href="#从外部读取CSV数据表-一律放在Patch下" class="headerlink" title="从外部读取CSV数据表 一律放在Patch下"></a>从外部读取CSV数据表 一律放在Patch下</h2><h3 id="通过-Get-Project-Directory-具体路径-Patch-DT-CommodityInfo-csv-可以获取到CSV文件在本地的绝对路径。"><a href="#通过-Get-Project-Directory-具体路径-Patch-DT-CommodityInfo-csv-可以获取到CSV文件在本地的绝对路径。" class="headerlink" title="通过 Get Project Directory + 具体路径(Patch/DT_CommodityInfo.csv)可以获取到CSV文件在本地的绝对路径。"></a>通过 <code>Get Project Directory + 具体路径(Patch/DT_CommodityInfo.csv)</code>可以获取到CSV文件在本地的绝对路径。</h3><img src="/2021/03/24/HotUpdate/T_ParsertCSVFile.png" width="75%">
<img src="/2021/03/24/HotUpdate/T_ParsertCSVFile2.png" width="75%">
<img src="/2021/03/24/HotUpdate/T_ParsertCSVFile3.png" width="75%">

<h2 id="通过这一流程可以获得数据表某一列的具体数值"><a href="#通过这一流程可以获得数据表某一列的具体数值" class="headerlink" title="通过这一流程可以获得数据表某一列的具体数值"></a>通过这一流程可以获得数据表某一列的具体数值</h2><p><img src="/2021/03/24/HotUpdate/T_ParserOutCSVFile.png" width="50%"><img src="/2021/03/24/HotUpdate/T_csvinfo.png" width="50%"></p>
<h2 id="如果需要更新该表，只需将该表修改后，通过versionPlugin上传即可"><a href="#如果需要更新该表，只需将该表修改后，通过versionPlugin上传即可" class="headerlink" title="如果需要更新该表，只需将该表修改后，通过versionPlugin上传即可"></a>如果需要更新该表，只需将该表修改后，通过versionPlugin上传即可</h2><h3 id="例如将-zzw的Price修改为50"><a href="#例如将-zzw的Price修改为50" class="headerlink" title="例如将 zzw的Price修改为50"></a>例如将 zzw的Price修改为50</h3><h3 id="修改后上传"><a href="#修改后上传" class="headerlink" title="修改后上传"></a>修改后上传</h3><p><img src="/2021/03/24/HotUpdate/T_ChooseCSVFile.png" width="50%"><img src="/2021/03/24/HotUpdate/T_UpdateOutCSVFile.png" width="50%"></p>
<h2 id="打开BaseVersion-自动更新并重启"><a href="#打开BaseVersion-自动更新并重启" class="headerlink" title="打开BaseVersion 自动更新并重启"></a>打开BaseVersion 自动更新并重启</h2><img src="/2021/03/24/HotUpdate/T_UpdayeCSVSuccessed.png" width="50%">

<h2 id="此时已更新成功"><a href="#此时已更新成功" class="headerlink" title="此时已更新成功"></a>此时已更新成功</h2><h1 id="通过配表读取外部Patch下的Pak包生成StaticMesh并热更Mesh"><a href="#通过配表读取外部Patch下的Pak包生成StaticMesh并热更Mesh" class="headerlink" title="通过配表读取外部Patch下的Pak包生成StaticMesh并热更Mesh"></a>通过配表读取外部Patch下的Pak包生成StaticMesh并热更Mesh</h1><h2 id="通过外部CSV表获取该Mesh位于Pak包的路径，transform信息，Material信息等"><a href="#通过外部CSV表获取该Mesh位于Pak包的路径，transform信息，Material信息等" class="headerlink" title="通过外部CSV表获取该Mesh位于Pak包的路径，transform信息，Material信息等"></a>通过外部CSV表获取该Mesh位于Pak包的路径，transform信息，Material信息等</h2><h1 id="热更Mesh流程"><a href="#热更Mesh流程" class="headerlink" title="热更Mesh流程"></a>热更Mesh流程</h1><h2 id="Content下新建补丁文件夹"><a href="#Content下新建补丁文件夹" class="headerlink" title="Content下新建补丁文件夹"></a>Content下新建补丁文件夹</h2><h2 id="外部mesh引用数据表修改Pak包路径"><a href="#外部mesh引用数据表修改Pak包路径" class="headerlink" title="外部mesh引用数据表修改Pak包路径"></a>外部mesh引用数据表修改Pak包路径</h2><h2 id="上传CSV数据表"><a href="#上传CSV数据表" class="headerlink" title="上传CSV数据表"></a>上传CSV数据表</h2><h2 id="引擎内Cook补丁包文件夹"><a href="#引擎内Cook补丁包文件夹" class="headerlink" title="引擎内Cook补丁包文件夹"></a>引擎内Cook补丁包文件夹</h2><h2 id="引擎内Upload该补丁文件夹"><a href="#引擎内Upload该补丁文件夹" class="headerlink" title="引擎内Upload该补丁文件夹"></a>引擎内Upload该补丁文件夹</h2>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://machl66.github.io/2021/03/22/UE4%20C++%20%E6%AD%A6%E5%99%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Machl">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Machl">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/03/22/UE4%20C++%20%E6%AD%A6%E5%99%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/" class="post-title-link" itemprop="url">UE4 C++ 武器系统设计</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-03-22 13:01:03 / Modified: 13:31:59" itemprop="dateCreated datePublished" datetime="2021-03-22T13:01:03+08:00">2021-03-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="C-可拾取武器类设计"><a href="#C-可拾取武器类设计" class="headerlink" title="C++ 可拾取武器类设计"></a>C++ 可拾取武器类设计</h1><h2 id="通过枚举创建武器的多种状态"><a href="#通过枚举创建武器的多种状态" class="headerlink" title="通过枚举创建武器的多种状态"></a>通过枚举创建武器的多种状态</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">UENUM(BlueprintType)<span class="comment">//可在蓝图中调用</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="keyword">class</span> <span class="title">EWeaponState</span> :</span>uint8</span><br><span class="line">&#123;</span><br><span class="line">	EWS_CanPickUp UMETA(DisplayName = &quot;CanPickUp&quot;),</span><br><span class="line">	EWS_Equipped UMETA(DisplayName = &quot;Equipped&quot;),</span><br><span class="line">    <span class="comment">//武器状态包括可拾取，已被玩家拾取并装备</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h1 id="武器类设计"><a href="#武器类设计" class="headerlink" title="武器类设计"></a>武器类设计</h1><p><code>.h文件</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;CoreMinimal.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;GamePlay/InteractableItem.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;WeaponItem.generated.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">UENUM(BlueprintType)</span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="keyword">class</span> <span class="title">EWeaponState</span> :</span>uint8</span><br><span class="line">&#123;</span><br><span class="line">	EWS_CanPickUp UMETA(DisplayName = &quot;CanPickUp&quot;),</span><br><span class="line">	EWS_Equipped UMETA(DisplayName = &quot;Equipped&quot;),</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">UCLASS()</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GETSTARTED_API</span> <span class="title">AWeaponItem</span> :</span> <span class="keyword">public</span> AInteractableItem</span><br><span class="line"><span class="comment">//父类为AInteractableItem</span></span><br><span class="line">&#123;</span><br><span class="line">	GENERATED_BODY()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">	AWeaponItem();<span class="comment">//构造函数 该类的构造函数需自己声明，基类不提供构造函数</span></span><br><span class="line"></span><br><span class="line">	UPROPERTY(EditAnywhere, BlueprintReadWrite, Category = <span class="string">&quot;Weapon|Sound&quot;</span>)</span><br><span class="line">	<span class="class"><span class="keyword">class</span> <span class="title">USoundCue</span>* <span class="title">OnEquipSound</span>;</span></span><br><span class="line">	</span><br><span class="line">	UPROPERTY(EditAnywhere,BlueprintReadWrite,Category = <span class="string">&quot;Weapon|Particle&quot;</span>)</span><br><span class="line">	<span class="keyword">bool</span> bShouldReserveIdlePartle;</span><br><span class="line">    <span class="comment">//是否保留 未被拾取时武器的粒子效果，该粒子效果源自父类 AInteractableItem</span></span><br><span class="line">    <span class="comment">//玩家拾取过后即不保留粒子特效</span></span><br><span class="line">	UPROPERTY(VisibleAnywhere, BlueprintReadWrite, Category = <span class="string">&quot;Weapon&quot;</span>)</span><br><span class="line">	EWeaponState WeaponState;</span><br><span class="line">    <span class="comment">//创建枚举类变量 WeaponState</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">BeginPlay</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Tick</span><span class="params">(<span class="keyword">float</span> DeltaTime)</span> <span class="keyword">override</span></span>;</span><br><span class="line">    <span class="comment">//重写父类Tick</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnOverlapBegin</span><span class="params">(UPrimitiveComponent* OverlappedComponent, AActor* OtherActor, UPrimitiveComponent* OtherComp, int32 OtherBodyIndex, <span class="keyword">bool</span> bFromSweep, <span class="keyword">const</span> FHitResult&amp; SweepResult)</span> <span class="keyword">override</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnOverlapEnd</span><span class="params">(UPrimitiveComponent* OverlappedComponent, AActor* OtherActor, UPrimitiveComponent* OtherComp, int32 OtherBodyIndex)</span> <span class="keyword">override</span></span>;	</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Equip</span><span class="params">(class AMainPlayer *MainPlayer)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">UnEquip</span><span class="params">(class AMainPlayer* MainPlayer)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">ActiveDisplayMeshCollision</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="comment">//开启武器Mesh的碰撞</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">DeActiveDisplayMeshCollision</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="comment">//关闭武器Mesh的碰撞</span></span><br><span class="line">    <span class="comment">//当玩家装备武器后，如果碰撞仍然存在会影响玩家运动</span></span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>.Cpp文件</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;WeaponItem.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;Components/SkeletalMeshComponent.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;Components/SphereComponent.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;Characters/player/MainPlayer.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;Engine/SkeletalMeshSocket.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;Sound/SoundCue.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;Kismet/GameplayStatics.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;Particles/ParticleSystemComponent.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;UObject/ConstructorHelpers.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;GameFramework/CharacterMovementComponent.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">AWeaponItem::AWeaponItem()<span class="comment">//构造函数 维护变量</span></span><br><span class="line">&#123;</span><br><span class="line">    TriggerVolume-&gt;SetSphereRadius(<span class="number">64.0f</span>);</span><br><span class="line">    DisplayMesh-&gt;DestroyComponent();</span><br><span class="line">    DisplayMesh = CreateDefaultSubobject&lt;USkeletalMeshComponent&gt;(TEXT(<span class="string">&quot;DisplaySkeletalMesh&quot;</span>));</span><br><span class="line">    DisplayMesh-&gt;SetupAttachment(GetRootComponent());</span><br><span class="line">    bShouldReserveIdlePartle = <span class="literal">false</span>;<span class="comment">//拾起后不保留IdleParticle</span></span><br><span class="line">    WeaponState = EWeaponState::EWS_CanPickUp;<span class="comment">//武器初始状态都为可拾取</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> ConstructorHelpers::FObjectFinder&lt;USoundCue&gt; <span class="title">SoundCueAsset</span><span class="params">(TEXT(<span class="string">&quot;SoundCue&#x27;/Game/Assets/Audios/Blade_Cue.Blade_Cue&#x27;&quot;</span>))</span></span>;</span><br><span class="line">    <span class="comment">//获取资源引用，可通过编辑器右键该SoundCue，GetReference 获得该资源引用</span></span><br><span class="line">    <span class="keyword">if</span> (SoundCueAsset.Succeeded())</span><br><span class="line">    &#123;</span><br><span class="line">        OnEquipSound = SoundCueAsset.Object;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//赋值</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AWeaponItem::BeginPlay</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Super::BeginPlay();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> AWeaponItem :: Tick(<span class="keyword">float</span> DeltaTime)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/*UE_LOG(LogTemp, Warning, TEXT(&quot;Overlap&quot;));*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AWeaponItem::OnOverlapBegin</span><span class="params">(UPrimitiveComponent* OverlappedComponent, AActor* OtherActor, UPrimitiveComponent* OtherComp, int32 OtherBodyIndex, <span class="keyword">bool</span> bFromSweep, <span class="keyword">const</span> FHitResult&amp; SweepResult)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Super::OnOverlapBegin(OverlappedComponent, OtherActor, OtherComp, OtherBodyIndex, bFromSweep, SweepResult);</span><br><span class="line">    <span class="keyword">if</span> (OtherActor &amp;&amp; WeaponState==EWeaponState::EWS_CanPickUp)</span><br><span class="line">        <span class="comment">//碰撞的Actor有效并且武器状态为可拾取</span></span><br><span class="line">    &#123;</span><br><span class="line">        AMainPlayer* MainPlayer = Cast&lt;AMainPlayer&gt;(OtherActor);</span><br><span class="line">        <span class="keyword">if</span> (MainPlayer)</span><br><span class="line">        &#123;</span><br><span class="line">            MainPlayer-&gt;OverlapingWeapon = <span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AWeaponItem::OnOverlapEnd</span><span class="params">(UPrimitiveComponent* OverlappedComponent, AActor* OtherActor, UPrimitiveComponent* OtherComp, int32 OtherBodyIndex)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Super::OnOverlapEnd(OverlappedComponent, OtherActor, OtherComp, OtherBodyIndex);</span><br><span class="line">    <span class="keyword">if</span> (OtherActor)</span><br><span class="line">    &#123;</span><br><span class="line">        AMainPlayer* MainPlayer = Cast&lt;AMainPlayer&gt;(OtherActor);</span><br><span class="line">        <span class="keyword">if</span> (MainPlayer &amp;&amp; MainPlayer-&gt;OverlapingWeapon==<span class="keyword">this</span>)</span><br><span class="line">            <span class="comment">//碰撞物体需要为MainPlayer并且发生Overlaping的Actor需要是自己</span></span><br><span class="line">            <span class="comment">//即，碰撞结束时，检测发生碰撞时，是否是自己发生碰撞，如果一开始玩家拾取的不是自己，那就不做后续操作</span></span><br><span class="line">        &#123;</span><br><span class="line">            MainPlayer-&gt;OverlapingWeapon = <span class="literal">nullptr</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AWeaponItem::Equip</span><span class="params">(AMainPlayer* MainPlayer)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (MainPlayer)<span class="comment">//判空</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> USkeletalMeshSocket* RightHandSocket = MainPlayer-&gt;GetMesh()-&gt;GetSocketByName(<span class="string">&quot;RightHandSocket&quot;</span>);</span><br><span class="line">        WeaponState = EWeaponState::EWS_Equipped;</span><br><span class="line">        DeActiveDisplayMeshCollision();</span><br><span class="line">        <span class="keyword">if</span> (RightHandSocket)</span><br><span class="line">        &#123;</span><br><span class="line">            RightHandSocket-&gt;AttachActor(<span class="keyword">this</span>, MainPlayer-&gt;GetMesh());</span><br><span class="line">            MainPlayer-&gt;bHasWeapon = <span class="literal">true</span>;<span class="comment">//玩家已持有武器</span></span><br><span class="line">            MainPlayer-&gt;EquipedWeapon = <span class="keyword">this</span>;<span class="comment">//装备当前武器</span></span><br><span class="line">            MainPlayer-&gt;OverlapingWeapon = <span class="literal">nullptr</span>;<span class="comment">//已装备武器，此时OverlapingWeapon为空</span></span><br><span class="line">            bNeedRotate = <span class="literal">false</span>;<span class="comment">//继承自InteractableItem</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (OnEquipSound)<span class="comment">//装备武器时发出声音</span></span><br><span class="line">            &#123;</span><br><span class="line">                UGameplayStatics::PlaySound2D(<span class="keyword">this</span>, OnEquipSound);<span class="comment">//当前类播放 OnEquipSound 音效</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!bShouldReserveIdlePartle)</span><br><span class="line">            &#123;</span><br><span class="line">                IdlePracticleComponent-&gt;Deactivate();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AWeaponItem::UnEquip</span><span class="params">(AMainPlayer* MainPlayer)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (MainPlayer &amp;&amp; !(MainPlayer-&gt;GetMovementComponent()-&gt;IsFalling())&amp;&amp;!(MainPlayer-&gt;bIsAttack))</span><br><span class="line">    &#123;</span><br><span class="line">        WeaponState = EWeaponState::EWS_CanPickUp;</span><br><span class="line">        ActiveDisplayMeshCollision();</span><br><span class="line">        MainPlayer-&gt;bHasWeapon = <span class="literal">false</span>;</span><br><span class="line">        MainPlayer-&gt;EquipedWeapon = <span class="literal">nullptr</span>;</span><br><span class="line">        <span class="keyword">if</span> (MainPlayer-&gt;OverlapingWeapon == <span class="literal">nullptr</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            MainPlayer-&gt;OverlapingWeapon = <span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        DetachFromActor(FDetachmentTransformRules::KeepWorldTransform);</span><br><span class="line">        SetActorRotation(FRotator(<span class="number">0.0f</span>));</span><br><span class="line">        SetActorScale3D(FVector(<span class="number">1.0f</span>));</span><br><span class="line"></span><br><span class="line">        bNeedRotate = <span class="literal">true</span>;</span><br><span class="line">        IdlePracticleComponent-&gt;Deactivate();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AWeaponItem::ActiveDisplayMeshCollision</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    DisplayMesh-&gt;SetCollisionEnabled(ECollisionEnabled::PhysicsOnly);</span><br><span class="line">    DisplayMesh-&gt;SetCollisionObjectType(ECollisionChannel::ECC_WorldStatic);</span><br><span class="line">    DisplayMesh-&gt;SetCollisionResponseToAllChannels(ECollisionResponse::ECR_Ignore);</span><br><span class="line">    DisplayMesh-&gt;SetCollisionResponseToChannel(ECollisionChannel::ECC_Pawn, ECollisionResponse::ECR_Overlap);</span><br><span class="line">    <span class="comment">//PhysicsOnly 刚体 约束</span></span><br><span class="line">    <span class="comment">//QueryOnly 扫描 重叠 移动</span></span><br><span class="line">    <span class="comment">//QueryAndPhysics 上述全部</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AWeaponItem::DeActiveDisplayMeshCollision</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    DisplayMesh-&gt;SetCollisionEnabled(ECollisionEnabled::NoCollision);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="Player中配合使用的代码段"><a href="#Player中配合使用的代码段" class="headerlink" title="Player中配合使用的代码段"></a>Player中配合使用的代码段</h1><p><code>变量设计</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">UPROPERTY(EditAnywhere,BlueprintReadWrite,Category = <span class="string">&quot;Weapon|Status&quot;</span>)</span><br><span class="line"><span class="keyword">bool</span> bHasWeapon;</span><br><span class="line">   <span class="comment">//记录玩家当前是否装备武器，用于后续运动状态维护以及状态机维护</span></span><br><span class="line">   <span class="comment">//例如该变量可控制玩家当前是否可移动，跳跃等</span></span><br><span class="line"></span><br><span class="line">UPROPERTY(VisibleAnywhere, BlueprintReadOnly, Category = <span class="string">&quot;Weapon&quot;</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AWeaponItem</span>* <span class="title">EquipedWeapon</span>;</span></span><br><span class="line">   <span class="comment">//该类存储当前装备的武器类指针，用于获取当前装备的武器</span></span><br><span class="line"></span><br><span class="line">UPROPERTY(VisibleAnywhere, BlueprintReadOnly, Category = <span class="string">&quot;Weapon&quot;</span>)</span><br><span class="line">AWeaponItem* OverlapingWeapon;</span><br><span class="line">   <span class="comment">//该类存储当前发生碰撞的武器类指针，用于记录</span></span><br><span class="line">   </span><br><span class="line">   UPROPERTY(VisibleAnywhere,BlueprintReadWrite, Category = <span class="string">&quot;Animation|Attack&quot;</span>)</span><br><span class="line"><span class="keyword">bool</span> bAttackKeyDown;</span><br><span class="line">   <span class="comment">//玩家是否按下攻击键 InputAction</span></span><br><span class="line"></span><br><span class="line">UPROPERTY(VisibleAnywhere, BlueprintReadOnly, Category = <span class="string">&quot;Animation|Attack&quot;</span>)</span><br><span class="line"><span class="keyword">bool</span> bIsAttacking;</span><br><span class="line">   <span class="comment">//玩家当前是否处于攻击状态</span></span><br><span class="line"></span><br><span class="line">UPROPERTY(EditDefaultsOnly, BlueprintReadOnly, Category = <span class="string">&quot;Animation|Attack&quot;</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UAnimMontage</span>* <span class="title">AttackMontage</span>;</span></span><br><span class="line">   <span class="comment">//攻击时的蒙太奇动画</span></span><br><span class="line"></span><br><span class="line">   UFUNCTION(BlueprintCallable)</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InteractKeyDown</span><span class="params">()</span></span>;</span><br><span class="line">   <span class="comment">//交互按键按下时</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AttackKeyDown</span><span class="params">()</span></span>;</span><br><span class="line">   <span class="comment">//按下攻击键</span></span><br><span class="line"><span class="function">FORCEINLINE <span class="keyword">void</span> <span class="title">AttackKeyUp</span><span class="params">()</span> </span>&#123; bAttackKeyDown = <span class="literal">false</span>; &#125;</span><br><span class="line">   <span class="comment">//攻击键抬起时 将变量 bAttackKeyDown 设为false 使用FORCEINLINE宏，该方法无需再CPP文件中创建声明/定义</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Attack</span><span class="params">()</span></span>;</span><br><span class="line">   <span class="comment">//攻击</span></span><br><span class="line">UFUNCTION(BlueprintCallable)</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AttackEnd</span><span class="params">()</span></span>;</span><br><span class="line">   <span class="comment">//攻击结束 该方法由蒙太奇动画发出Notify，再动画蓝图中调用</span></span><br></pre></td></tr></table></figure>

<p><code>初始化变量</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bIsAttacking = <span class="literal">false</span>;</span><br><span class="line">bAttackKeyDown = <span class="literal">false</span>;</span><br></pre></td></tr></table></figure>

<p><code>绑定攻击Action</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AMainPlayer::SetupPlayerInputComponent</span><span class="params">(UInputComponent* PlayerInputComponent)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	PlayerInputComponent-&gt;BindAction(<span class="string">&quot;Attack&quot;</span>, IE_Pressed, <span class="keyword">this</span>, &amp;AMainPlayer::AttackKeyDown);</span><br><span class="line">	PlayerInputComponent-&gt;BindAction(<span class="string">&quot;Attack&quot;</span>, IE_Released, <span class="keyword">this</span>, &amp;AMainPlayer::AttackKeyUp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>按下攻击键</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AMainPlayer::AttackKeyDown</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="comment">//按下Attack键，绑定的Action事件调用该函数</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    bAttackKeyDown = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span> (bHasWeapon)<span class="comment">//判断当前是否装备武器</span></span><br><span class="line">    &#123;</span><br><span class="line">        Attack();<span class="comment">//调用攻击函数</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>攻击函数</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AMainPlayer::Attack</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!bIsAttacking&amp;&amp;!(GetMovementComponent()-&gt;IsFalling()))</span><br><span class="line">    <span class="comment">//当前正在攻击或者正在空中时，不能攻击</span></span><br><span class="line">    &#123;</span><br><span class="line">        bIsAttacking = <span class="literal">true</span>;<span class="comment">//设置当前状态为正在攻击</span></span><br><span class="line">        UAnimInstance* AnimaInstance = GetMesh()-&gt;GetAnimInstance();</span><br><span class="line">        <span class="comment">//获取当前Mesh的AnimInstance 赋值给AnimaInstance</span></span><br><span class="line">        <span class="keyword">if</span> (AnimaInstance &amp;&amp; AttackMontage)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">const</span> <span class="keyword">float</span> PlayRate = FMath::RandRange(<span class="number">1.25f</span>, <span class="number">1.75f</span>);</span><br><span class="line">            <span class="comment">//随机蒙太奇播放速率 1.25/1.75</span></span><br><span class="line">            <span class="keyword">const</span> FString AnimSectionName = FString::FromInt(FMath::RandRange(<span class="number">1</span>,<span class="number">2</span>));</span><br><span class="line">            <span class="comment">//随机蒙太奇播放片段 1/2 FName类，可通过强制类型转换，将FString转换为FName类</span></span><br><span class="line">            AnimaInstance-&gt;Montage_Play(AttackMontage, PlayRate);</span><br><span class="line">            <span class="comment">//播放蒙太奇动画</span></span><br><span class="line">            AnimaInstance-&gt;Montage_JumpToSection(FName(*AnimSectionName), AttackMontage);</span><br><span class="line">            <span class="comment">//直接播放某个片段</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>攻击结束时</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AMainPlayer::AttackEnd</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="comment">//该函数在蒙太奇动画播放结束时通过Nitify调用</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    bIsAttacking = <span class="literal">false</span>; <span class="comment">//将攻击状态设为false</span></span><br><span class="line">    <span class="keyword">if</span> (bAttackKeyDown)</span><br><span class="line">    &#123;</span><br><span class="line">        AttackKeyDown();</span><br><span class="line">        <span class="comment">//设置一个闭环，即按住攻击键不放，则会重复攻击</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://machl66.github.io/2021/03/22/UE4%20C++%20SoundCue/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Machl">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Machl">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/03/22/UE4%20C++%20SoundCue/" class="post-title-link" itemprop="url">UE4 C++ SoundCue</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-03-22 12:41:37 / Modified: 13:00:47" itemprop="dateCreated datePublished" datetime="2021-03-22T12:41:37+08:00">2021-03-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="C-SoundCue使用"><a href="#C-SoundCue使用" class="headerlink" title="C++ SoundCue使用"></a>C++ SoundCue使用</h1><h2 id="创建-SoundCue-类"><a href="#创建-SoundCue-类" class="headerlink" title="创建 SoundCue 类"></a>创建 <code>SoundCue</code> 类</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">UPROPERTY(EditAnywhere, BlueprintReadWrite, Category = <span class="string">&quot;Interactable Item|Sounds&quot;</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">USoundCue</span>* <span class="title">OverlapSound</span>;</span></span><br><span class="line">   <span class="comment">//创建一个OverlapSoundCue类 可在蓝图中赋值</span></span><br></pre></td></tr></table></figure>
<p><code>在CPP文件中，播放SoundCue</code><br><code>需引入辅助类头文件</code> <code>#include &quot;Kismet/GameplayStatics.h&quot;</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UGameplayStatics::PlaySound2D(<span class="keyword">this</span>, OverlapSound);<span class="comment">//当前类播放 OverlapSound 音效</span></span><br></pre></td></tr></table></figure>

<p><code>在构造函数中硬编码SoundCue初值</code> <code>需引入辅助类头文件</code> <code>#include &quot;UObject/ConstructorHelpers.h&quot;</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> ConstructorHelpers::FObjectFinder&lt;USoundCue&gt; <span class="title">SoundCueAsset</span><span class="params">(TEXT(<span class="string">&quot;SoundCue&#x27;/Game/Assets/Audios/Blade_Cue.Blade_Cue&#x27;&quot;</span>))</span></span>;</span><br><span class="line"><span class="keyword">if</span> (SoundCueAsset.Succeeded())<span class="comment">//安全性判断，是否SoundCueAsset的引用不为空</span></span><br><span class="line">   <span class="comment">//即当前引用地址是否存在该指针</span></span><br><span class="line">&#123;</span><br><span class="line">	OnEquipSound = SoundCueAsset.Object;</span><br><span class="line">       <span class="comment">//获取该SoundCueAeest下的SoundCue</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://machl66.github.io/2021/03/12/UE4%20C++%20%E5%87%BD%E6%95%B0%E5%AE%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Machl">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Machl">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/03/12/UE4%20C++%20%E5%87%BD%E6%95%B0%E5%AE%8F/" class="post-title-link" itemprop="url">UE4 C++ 函数宏</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-03-12 19:36:12 / Modified: 19:49:50" itemprop="dateCreated datePublished" datetime="2021-03-12T19:36:12+08:00">2021-03-12</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="UE4-常见函数宏-UFUNCTION"><a href="#UE4-常见函数宏-UFUNCTION" class="headerlink" title="UE4 常见函数宏  UFUNCTION"></a>UE4 常见函数宏  <code>UFUNCTION</code></h1><h2 id="BlueprintCallable"><a href="#BlueprintCallable" class="headerlink" title="BlueprintCallable"></a><code>BlueprintCallable</code></h2><pre><code>该函数可以在蓝图或关卡蓝图图表中执行
</code></pre>
<h2 id="BlueprintImplementableEvent"><a href="#BlueprintImplementableEvent" class="headerlink" title="BlueprintImplementableEvent"></a><code>BlueprintImplementableEvent</code></h2><pre><code>此函数可以在蓝图或关卡蓝图图标中重载
此声明的函数不需要创建函数定义
</code></pre>
<h2 id="BlueprintAuthorityOnly"><a href="#BlueprintAuthorityOnly" class="headerlink" title="BlueprintAuthorityOnly"></a><code>BlueprintAuthorityOnly</code></h2><pre><code>只有具有网络权限的计算机上运行时（例如服务端），此功能才会从蓝图代码执行
</code></pre>
<h2 id="Category"><a href="#Category" class="headerlink" title="Category"></a><code>Category</code></h2><pre><code>同变量宏，略
</code></pre>
<h2 id="BlueprintNativeEvent"><a href="#BlueprintNativeEvent" class="headerlink" title="BlueprintNativeEvent "></a><code>BlueprintNativeEvent </code></h2><pre><code>此函数将由蓝图进行重载，但同时也包含native类的执行。提供一个名称为[FunctionName]_Implementation的函数本体而非[FunctionName];自动生成的代码将包含转换程序,此程序在需要时会调用实施方式
</code></pre>
<h2 id="BlueprintPure"><a href="#BlueprintPure" class="headerlink" title="BlueprintPure "></a><code>BlueprintPure </code></h2><pre><code>该函数为纯函数，再蓝图中没有执行线，只有返回值。
可以在蓝图或关卡蓝图中执行。
</code></pre>
<h2 id="CallInEditor"><a href="#CallInEditor" class="headerlink" title="CallInEditor "></a><code>CallInEditor </code></h2><pre><code>该函数可以在编辑器中通过详细信息面板中的选定实例中调用。
</code></pre>
<h2 id="Exec"><a href="#Exec" class="headerlink" title="Exec "></a><code>Exec </code></h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">该函数可以在控制台中调用</span><br><span class="line">UFUNCTION(Exec)</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Test1</span><span class="params">()</span></span>;</span><br><span class="line">再控制台中输入:Test1 即可调用该函数</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://machl66.github.io/2021/03/12/UE4%20C++%20%E8%80%90%E5%8A%9B%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Machl">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Machl">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/03/12/UE4%20C++%20%E8%80%90%E5%8A%9B%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/" class="post-title-link" itemprop="url">UE4 C++ 耐力系统设计</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-03-12 15:51:48 / Modified: 17:09:23" itemprop="dateCreated datePublished" datetime="2021-03-12T15:51:48+08:00">2021-03-12</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="C-耐力系统设计"><a href="#C-耐力系统设计" class="headerlink" title="C++ 耐力系统设计"></a>C++ 耐力系统设计</h1><h2 id="简述耐力系统"><a href="#简述耐力系统" class="headerlink" title="简述耐力系统"></a>简述耐力系统</h2><h3 id="1-供玩家奔跑跳跃等"><a href="#1-供玩家奔跑跳跃等" class="headerlink" title="1.供玩家奔跑跳跃等"></a>1.供玩家奔跑跳跃等</h3><pre><code>    玩家可通过LShift键进行加速奔跑行为。
    玩家进行一些特殊运动状态时，也可以消耗耐力。
</code></pre>
<h3 id="2-耐力条设计"><a href="#2-耐力条设计" class="headerlink" title="2.耐力条设计"></a>2.耐力条设计</h3><pre><code>    在UMG中，通过ProgressBar简单设计耐力条UI
</code></pre>
<h3 id="3-耐力条分配"><a href="#3-耐力条分配" class="headerlink" title="3.耐力条分配"></a>3.耐力条分配</h3><pre><code>    应当设计不同耐力状态，例如普通状态，筋疲力竭状态，可按7/3，8/2分配。
    玩家处于筋疲力竭状态时不可以再进行加速。
    但玩家可从普通状态一直加速到耐力条变空
</code></pre>
<h3 id="4-程序设计"><a href="#4-程序设计" class="headerlink" title="4.程序设计"></a>4.程序设计</h3><p><code>通过定义枚举类记录状态</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">UENUM(BlueprintType)</span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="keyword">class</span> <span class="title">EPlayerMovementStatus</span> :</span> uint8<span class="comment">//该枚举使用uint8 位</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//拿该类的每个单词首字母作为前缀，后缀跟上状态名</span></span><br><span class="line">    EPMS_Normal UMETA(DisplayName=&quot;Normal&quot;),//在编辑器中使用DisplayName </span><br><span class="line">    EPMS_Sprinting UMETA(DisplayName = &quot;Sprinting&quot;),</span><br><span class="line">    <span class="function">EPMS_Dead <span class="title">UMETA</span><span class="params">(DisplayName = <span class="string">&quot;Deadd&quot;</span>)</span></span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//记录玩家运动状态 普通，加速，或者死亡</span></span><br><span class="line">UENUM(BlueprintType)</span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="keyword">class</span> <span class="title">EPlayerStaminaStatus</span> :</span> uint8</span><br><span class="line">&#123;</span><br><span class="line">    EPSS_Normal UMETA(DisplayName = &quot;Normal&quot;),</span><br><span class="line">    EPSS_Exhuasted UMETA(DisplayName = &quot;Exhuasted&quot;),</span><br><span class="line">    <span class="function">EPSS_ExhaustedRecovering  <span class="title">UMETA</span><span class="params">(DisplayName = <span class="string">&quot;ExhaustedRecovering&quot;</span>)</span></span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//记录玩家耐力状态 普通，筋疲力竭，筋疲力竭正在恢复</span></span><br></pre></td></tr></table></figure>
<p><code>变量定义</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">UPROPERTY(VisibleAnywhere,BlueprintReadWrite, Category = <span class="string">&quot;Player Stats&quot;</span>)</span><br><span class="line">EPlayerStaminaStatus PlayerStaminaStatus;<span class="comment">//创建玩家耐力状态枚举变量</span></span><br><span class="line"></span><br><span class="line">UPROPERTY(VisibleAnywhere, BlueprintReadWrite, Category = <span class="string">&quot;Player Stats&quot;</span>)</span><br><span class="line">EPlayerMovementStatus PlayerMovementStatus;<span class="comment">//创建玩家运动状态枚举变量</span></span><br><span class="line"></span><br><span class="line">      UPROPERTY(EditAnywhere, BlueprintReadWrite, Category = <span class="string">&quot;Player Stats&quot;</span>)</span><br><span class="line"><span class="keyword">float</span> CurrentStamina;<span class="comment">//当前耐力值，UI中每帧获取当前耐力绑定耐力条</span></span><br><span class="line"></span><br><span class="line">      UPROPERTY(VisibleAnywhere, BlueprintReadWrite, Category = <span class="string">&quot;Player Stats&quot;</span>)</span><br><span class="line"><span class="keyword">float</span> SprintingSpeed;<span class="comment">//加速状态下的Speed</span></span><br><span class="line"></span><br><span class="line">UPROPERTY(VisibleAnywhere, BlueprintReadWrite, Category = <span class="string">&quot;Player Stats&quot;</span>)</span><br><span class="line"><span class="keyword">float</span> RunningSpeed;<span class="comment">//正常奔跑状态下的Speed</span></span><br><span class="line"></span><br><span class="line">UPROPERTY(VisibleAnywhere, BlueprintReadWrite, Category = <span class="string">&quot;Player Stats&quot;</span>)</span><br><span class="line"><span class="keyword">float</span> WalkSpeed;<span class="comment">//行走速度</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> bLeftShiftKeyDown;<span class="comment">//是否按下左Shift键</span></span><br></pre></td></tr></table></figure>
<p><code>函数定义</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">FORCEINLINE <span class="keyword">void</span> <span class="title">LeftShiftKeyDown</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	bLeftShiftKeyDown = <span class="literal">true</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function">FORCEINLINE <span class="keyword">void</span> <span class="title">LeftShiftKeyUp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	bLeftShiftKeyDown = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">   <span class="comment">//自定义按下抬起函数，防止耐力耗完后玩家依旧按住Shift，程序层面添加debug</span></span><br><span class="line"></span><br><span class="line">UFUNCTION(BlueprintCallable)</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">IncreateStamina</span><span class="params">(<span class="keyword">float</span> Value)</span></span>;<span class="comment">//增加耐力 喝蓝药的时候可以调用</span></span><br><span class="line">   </span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">SetMovementStatus</span><span class="params">(EPlayerMovementStatus Status)</span></span>;</span><br><span class="line">   <span class="comment">//玩家在不同的运动状态时，设置不同的运动速度</span></span><br></pre></td></tr></table></figure>
<p><code>变量初始化</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">MaxStamina = <span class="number">150.0f</span>;</span><br><span class="line">CurrentStamina = MaxStamina;</span><br><span class="line">StaminaConsumeRate = <span class="number">20.0f</span>;</span><br><span class="line">StaminaRecoveraRate = <span class="number">15.0f</span>;</span><br><span class="line">ExhaustedStaminaRatio = <span class="number">0.167f</span>;</span><br><span class="line">   <span class="comment">//剩下1/6耐力时筋疲力竭</span></span><br><span class="line">PlayerStaminaStatus = EPlayerStaminaStatus::EPSS_Normal;</span><br><span class="line">   <span class="comment">//初始耐力状态</span></span><br><span class="line">PlayerMovementStatus = EPlayerMovementStatus::EPMS_Normal;</span><br><span class="line">   <span class="comment">//初始人物运动状态</span></span><br><span class="line">bLeftShiftKeyDown = <span class="literal">false</span>;</span><br><span class="line">   <span class="comment">//初始按键按下状态</span></span><br><span class="line">SprintingSpeed = <span class="number">900.0f</span>;</span><br><span class="line">RunningSpeed = <span class="number">600.0f</span>;</span><br><span class="line">WalkSpeed = <span class="number">100.0f</span>;</span><br><span class="line">   <span class="comment">//不同状态下人物运动速度设计</span></span><br></pre></td></tr></table></figure>
<p><code>设置人物运动状态（速度）</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AMainPlayer::SetMovementStatus</span><span class="params">(EPlayerMovementStatus Status)</span></span></span><br><span class="line"><span class="function"><span class="comment">//设置不同状态下人物速度s</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    PlayerMovementStatus = Status;</span><br><span class="line">    <span class="comment">//给全局变量：人物运动状态赋值</span></span><br><span class="line">    <span class="keyword">switch</span> (PlayerMovementStatus)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">case</span> EPlayerMovementStatus::EPMS_Sprinting:</span><br><span class="line">        GetCharacterMovement()-&gt;MaxWalkSpeed = SprintingSpeed;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        GetCharacterMovement()-&gt;MaxWalkSpeed = RunningSpeed;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;`</span><br></pre></td></tr></table></figure>


<p><code>在Event Tick下检测耐力状态</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> (PlayerStaminaStatus)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">case</span> EPlayerStaminaStatus::EPSS_Normal:<span class="comment">//耐力条处于正常区时</span></span><br><span class="line">			<span class="keyword">if</span> (bLeftShiftKeyDown)<span class="comment">//此时按下左Shift</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span> (CurrentStamina-StaminaConsumeRate*DeltaTime &lt;= MaxStamina * ExhaustedStaminaRatio)</span><br><span class="line">					<span class="comment">//判定：下一帧，耐力是否位于筋疲力竭区</span></span><br><span class="line">				&#123;</span><br><span class="line">					PlayerStaminaStatus = EPlayerStaminaStatus::EPSS_Exhuasted;</span><br><span class="line">					<span class="comment">//耐力已经精疲力竭</span></span><br><span class="line">				&#125;</span><br><span class="line">				CurrentStamina -= StaminaConsumeRate * DeltaTime;</span><br><span class="line">                <span class="comment">//耐力 以 Rate 速率为基准减少</span></span><br><span class="line">				SetMovementStatus(EPlayerMovementStatus::EPMS_Sprinting);</span><br><span class="line">                <span class="comment">//将速度设为冲刺速度</span></span><br><span class="line">				<span class="comment">//耐力尚未筋疲力竭</span></span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span><span class="comment">//耐力条处于正常区 且 没有按下LShift 此时耐力缓慢恢复  </span></span><br><span class="line">			&#123;	</span><br><span class="line">				CurrentStamina = FMath::Clamp(CurrentStamina + StaminaRecoveraRate * DeltaTime, <span class="number">0.0f</span>, MaxStamina);</span><br><span class="line">				SetMovementStatus(EPlayerMovementStatus::EPMS_Normal);</span><br><span class="line">                <span class="comment">//将速度设为正常速度</span></span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> EPlayerStaminaStatus::EPSS_Exhuasted:</span><br><span class="line">			<span class="keyword">if</span> (bLeftShiftKeyDown)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span> (CurrentStamina - StaminaConsumeRate * DeltaTime &lt;= <span class="number">0.0f</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					LeftShiftKeyUp();<span class="comment">//程序上将玩家的加速键抬起</span></span><br><span class="line">					PlayerStaminaStatus = EPlayerStaminaStatus::EPSS_ExhaustedRecovering;</span><br><span class="line">                    <span class="comment">//将耐力状态设置为 筋疲力竭需要恢复得状态</span></span><br><span class="line">					SetMovementStatus(EPlayerMovementStatus::EPMS_Normal);</span><br><span class="line">                    <span class="comment">//加速状态取消，玩家移动状态改为普通</span></span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">				&#123;</span><br><span class="line">					CurrentStamina -= StaminaConsumeRate * DeltaTime;</span><br><span class="line">                    <span class="comment">//耐力位于筋疲力竭区但是仍然可以继续加速，此时继续减少Stamina</span></span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span><span class="comment">//耐力处于筋疲力竭区但是没有再按下LShift</span></span><br><span class="line">			&#123;</span><br><span class="line">				PlayerStaminaStatus = EPlayerStaminaStatus::EPSS_ExhaustedRecovering;</span><br><span class="line">                <span class="comment">//此时耐力状态为筋疲力竭恢复状态</span></span><br><span class="line">				CurrentStamina = FMath::Clamp(CurrentStamina + StaminaRecoveraRate * DeltaTime, <span class="number">0.0f</span>, MaxStamina*ExhaustedStaminaRatio);<span class="comment">//耐力缓慢增加</span></span><br><span class="line">				SetMovementStatus(EPlayerMovementStatus::EPMS_Normal);</span><br><span class="line">                <span class="comment">//移动状态改为Normal，加速状态取消</span></span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> EPlayerStaminaStatus::EPSS_ExhaustedRecovering:</span><br><span class="line">			<span class="keyword">if</span> (CurrentStamina + StaminaConsumeRate * DeltaTime &gt;= MaxStamina * ExhaustedStaminaRatio)<span class="comment">//如果下一帧耐力超过了筋疲力竭区</span></span><br><span class="line">			&#123;</span><br><span class="line">				PlayerStaminaStatus = EPlayerStaminaStatus::EPSS_Normal;<span class="comment">//耐力状态变为普通</span></span><br><span class="line">			&#125;</span><br><span class="line">			CurrentStamina += StaminaRecoveraRate * DeltaTime;</span><br><span class="line">            <span class="comment">//如果耐力处于筋疲力竭区并且未达到临界值，耐力每帧增加</span></span><br><span class="line">			LeftShiftKeyUp();</span><br><span class="line">			SetMovementStatus(EPlayerMovementStatus::EPMS_Normal);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-UMG设计"><a href="#5-UMG设计" class="headerlink" title="5.UMG设计"></a>5.UMG设计</h3><pre><code>1.绑定ProgressBar，每帧获得CurrentStamina，与MaxStamina计算获得当前耐力值比例。实时更新ProfressBar。
2.耐力筋疲力竭时，耐力条颜色变为橘红色。可绑定ProgeressBar下的Apperance，检测到playerStaminaStatu为Exhauste时，变为红色。
</code></pre>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://machl66.github.io/2021/03/08/UE4%20C++%E4%BD%BF%E7%94%A8%20Clamp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Machl">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Machl">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/03/08/UE4%20C++%E4%BD%BF%E7%94%A8%20Clamp/" class="post-title-link" itemprop="url">UE4 C++使用 Clamp</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-03-08 21:00:50 / Modified: 21:29:19" itemprop="dateCreated datePublished" datetime="2021-03-08T21:00:50+08:00">2021-03-08</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="使用Clamp实现“夹值”"><a href="#使用Clamp实现“夹值”" class="headerlink" title="使用Clamp实现“夹值”"></a>使用Clamp实现“夹值”</h1><h2 id="不需要引入头文件-使用Fmath工具类即可调用"><a href="#不需要引入头文件-使用Fmath工具类即可调用" class="headerlink" title="不需要引入头文件 使用Fmath工具类即可调用"></a>不需要引入头文件 使用<code>Fmath</code>工具类即可调用</h2><h2 id="举例"><a href="#举例" class="headerlink" title="举例"></a>举例</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Health = FMath::Clamp&lt;<span class="keyword">float</span>&gt;(Health + Value, <span class="number">0.0f</span>, MaxHealth);</span><br><span class="line"><span class="comment">//&lt;参数类型&gt; 这里以float为例</span></span><br><span class="line"><span class="comment">//第一个参数为传入的数值</span></span><br><span class="line"><span class="comment">//Health 范围0~MaxHealth</span></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://machl66.github.io/2021/03/08/UE4%20C++%20%E4%BC%A4%E5%AE%B3%E7%B3%BB%E7%BB%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Machl">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Machl">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/03/08/UE4%20C++%20%E4%BC%A4%E5%AE%B3%E7%B3%BB%E7%BB%9F/" class="post-title-link" itemprop="url">UE4 C++ 伤害系统</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-03-08 20:44:13 / Modified: 21:29:19" itemprop="dateCreated datePublished" datetime="2021-03-08T20:44:13+08:00">2021-03-08</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="UE4-C-伤害系统使用"><a href="#UE4-C-伤害系统使用" class="headerlink" title="UE4 C++ 伤害系统使用"></a>UE4 C++ 伤害系统使用</h1>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://machl66.github.io/2021/03/08/UE4%20C++%E4%B8%AD%E7%BB%91%E5%AE%9A%E6%8C%89%E9%94%AEAction%E4%BA%8B%E4%BB%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Machl">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Machl">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/03/08/UE4%20C++%E4%B8%AD%E7%BB%91%E5%AE%9A%E6%8C%89%E9%94%AEAction%E4%BA%8B%E4%BB%B6/" class="post-title-link" itemprop="url">UE4 C++ 绑定按键动作事件</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-03-08 20:04:40" itemprop="dateCreated datePublished" datetime="2021-03-08T20:04:40+08:00">2021-03-08</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-03-24 09:15:14" itemprop="dateModified" datetime="2021-03-24T09:15:14+08:00">2021-03-24</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="在C-中绑定按键Action事件"><a href="#在C-中绑定按键Action事件" class="headerlink" title="在C++中绑定按键Action事件"></a>在C++中绑定按键Action事件</h1><h3 id="添加动作名称和触发按键"><a href="#添加动作名称和触发按键" class="headerlink" title="添加动作名称和触发按键"></a>添加动作名称和触发按键</h3><p>在ProjectSettings中，Engine –&gt; Input –&gt; Bindings –&gt; ActionMappings中</p>
<p>添加动作名称</p>
<p>例如：Jump</p>
<p>触发按键为：SpaceBar</p>
<h3 id="在-h文件中声明用来绑定该-ActionEvent-的方法"><a href="#在-h文件中声明用来绑定该-ActionEvent-的方法" class="headerlink" title="在.h文件中声明用来绑定该 ActionEvent 的方法"></a>在.h文件中声明用来绑定该 ActionEvent 的方法</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">   <span class="comment">//例子中的.h文件为继承自ACharacter类的子类</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Jump</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line"><span class="comment">//重写ACharacter类里面的Jump方法</span></span><br><span class="line">   <span class="comment">//通常如果需要用到动作映射和轴映射，习惯将动作映射方法声明和绑定写在轴映射上方</span></span><br><span class="line"></span><br><span class="line">   UFUNCTION(BlueprintCallable, Category=Character)</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">StopJumping</span><span class="params">()</span></span>;<span class="comment">//StopJumping方法不重写 该段代码取自Character.h源码</span></span><br></pre></td></tr></table></figure>

<h3 id="在-h文件中写一个方法用来写绑定的语句"><a href="#在-h文件中写一个方法用来写绑定的语句" class="headerlink" title="在.h文件中写一个方法用来写绑定的语句"></a>在.h文件中写一个方法用来写绑定的语句</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Called to bind functionality to input</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">SetupPlayerInputComponent</span><span class="params">(class UInputComponent* PlayerInputComponent)</span> <span class="keyword">override</span></span>;<span class="comment">//ACharacter类自带该方法</span></span><br></pre></td></tr></table></figure>
<h3 id="在-cpp文件中写绑定语句"><a href="#在-cpp文件中写绑定语句" class="headerlink" title="在.cpp文件中写绑定语句"></a>在.cpp文件中写绑定语句</h3><p>需要引入头文件才可以调用 <code>PlayerInputComponent</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;Components&#x2F;InputComponent.h&quot;</span><br></pre></td></tr></table></figure>
<p>写在上面声明的方法中</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AMainPlayer::SetupPlayerInputComponent</span><span class="params">(UInputComponent* PlayerInputComponent)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	</span><br><span class="line">	PlayerInputComponent-&gt;BindAction(<span class="string">&quot;Jump&quot;</span>, IE_Pressed, <span class="keyword">this</span>, &amp;AMainPlayer::Jump);   </span><br><span class="line">	PlayerInputComponent-&gt;BindAction(<span class="string">&quot;Jump&quot;</span>, IE_Released, <span class="keyword">this</span>, &amp;ACharacter::StopJumping);</span><br><span class="line">    <span class="comment">//(ProjecSettings中的动作事件名，按下或者松开，绑定到哪个类，用取地址符获得绑定到哪个方法上)</span></span><br><span class="line">    <span class="comment">//即按下SpaceBar，触发Jump事件，Jump事件会触发绑定的AMainPlayer中的Jump事件</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://machl66.github.io/2021/03/07/UE4%20C++%20%E5%8F%98%E9%87%8F%E5%AE%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Machl">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Machl">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/03/07/UE4%20C++%20%E5%8F%98%E9%87%8F%E5%AE%8F/" class="post-title-link" itemprop="url">UE4 C++ 变量宏</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-03-07 18:51:20" itemprop="dateCreated datePublished" datetime="2021-03-07T18:51:20+08:00">2021-03-07</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-03-24 09:15:14" itemprop="dateModified" datetime="2021-03-24T09:15:14+08:00">2021-03-24</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="UE4-C-变量常见宏-UPROPERTY"><a href="#UE4-C-变量常见宏-UPROPERTY" class="headerlink" title="UE4 C++ 变量常见宏 UPROPERTY"></a>UE4 C++ 变量常见宏 <code>UPROPERTY</code></h1><h2 id="书写格式"><a href="#书写格式" class="headerlink" title="书写格式"></a><code>书写格式</code></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">UPROPERTY(A,B,C)&#x2F;&#x2F;用逗号隔开</span><br><span class="line">float Money;</span><br></pre></td></tr></table></figure>

<h3 id="Category-“A-B”"><a href="#Category-“A-B”" class="headerlink" title="Category = “A|B”"></a><code>Category = “A|B”</code></h3><pre><code>创建分类，该分类会出现在该类的 ClassDefaults 下

| 后的为子分类，也可以不适用
| 即定义嵌套层级
</code></pre>
<h3 id="BlueprintReadWrite"><a href="#BlueprintReadWrite" class="headerlink" title="BlueprintReadWrite"></a><code>BlueprintReadWrite</code></h3><pre><code>设置该变量属性为蓝图可读可写，同时给予 Read / Write 权限。
可以在蓝图中调用 Get / Set 方法
</code></pre>
<h3 id="BlueprintReadOnly"><a href="#BlueprintReadOnly" class="headerlink" title="BlueprintReadOnly"></a><code>BlueprintReadOnly</code></h3><pre><code>只提供 Read权限
可调用Get方法
</code></pre>
<h3 id="BuleprintWriteOnly"><a href="#BuleprintWriteOnly" class="headerlink" title="BuleprintWriteOnly"></a><code>BuleprintWriteOnly</code></h3><pre><code>只提供Write权限
可调用Set方法
</code></pre>
<h3 id="EditAnyWhere"><a href="#EditAnyWhere" class="headerlink" title="EditAnyWhere"></a><code>EditAnyWhere</code></h3><pre><code>将变量暴露在信息面板中，以便随时修改变量（无需Set）
</code></pre>
<h3 id="EditDefaultsOnly"><a href="#EditDefaultsOnly" class="headerlink" title="EditDefaultsOnly"></a><code>EditDefaultsOnly</code></h3><pre><code>只能从ClassDefaults面板编辑，无法在Detail面板编辑
只能在编辑器中，打开该蓝图修改参数，但无法在场景中选中该BP进行修改参数
</code></pre>
<h3 id="VisibleAnyWhere"><a href="#VisibleAnyWhere" class="headerlink" title="VisibleAnyWhere"></a><code>VisibleAnyWhere</code></h3><pre><code>将变量暴露在面板中，但不能修改
</code></pre>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>


<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Machl</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
